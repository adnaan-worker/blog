# 图片调整大小功能测试指南

## ✅ 已完成的优化

### 1. CSS 增强
- ✅ 增加了 `.ProseMirror` 选择器优先级
- ✅ 调整手柄从 20px 增大到 24px（更容易点击）
- ✅ 增加 `z-index: 100`（确保在最上层）
- ✅ 添加 `pointer-events: auto !important`（确保可点击）
- ✅ 移除图片 `transition`（避免调整时延迟）
- ✅ 增强悬停效果（手柄放大 1.2 倍）

### 2. 视觉优化
- ✅ 手柄有阴影效果，更明显
- ✅ 悬停时手柄放大，提供视觉反馈
- ✅ 调整时显示虚线边框
- ✅ 工具栏位置优化，避免遮挡

## 🧪 测试步骤

### 1. 插入图片
1. 进入编辑器（文章或手记）
2. 点击工具栏的 **图片按钮** 📷
3. 输入图片 URL 或上传图片
4. 图片插入成功

### 2. 测试调整大小
1. **悬停在图片上**
   - 应该看到右下角出现**蓝色圆点**（调整手柄）
   - 应该看到图片上方出现**工具栏**（4 个按钮）

2. **拖动调整**
   - 鼠标移到**蓝色圆点**上（光标变成斜向箭头 ↘️）
   - 按住鼠标左键**向右下拖动**（图片变大）
   - 按住鼠标左键**向左上拖动**（图片变小）
   - 松开鼠标，图片大小固定

3. **视觉反馈**
   - 拖动时，图片周围显示**蓝色虚线边框**
   - 手柄悬停时会**放大**
   - 图片大小实时变化

### 3. 测试工具栏
1. **对齐功能**
   - 点击 **左对齐**按钮：图片靠左
   - 点击 **居中**按钮：图片居中
   - 点击 **右对齐**按钮：图片靠右

2. **删除功能**
   - 点击 **垃圾桶**按钮：删除图片

## 🐛 如果还是不能拖动，请检查：

### 检查清单
- [ ] 浏览器是否已刷新（Ctrl + F5 强制刷新）
- [ ] 浏览器控制台是否有错误
- [ ] 鼠标是否移到了**蓝色圆点**上（不是图片上）
- [ ] 是否悬停后才出现蓝色圆点
- [ ] 图片是否是通过 ResizableImage 插入的

### 调试方法

#### 1. 检查 DOM 结构
打开浏览器开发者工具（F12），检查图片的 HTML 结构应该是：

```html
<div class="resizable-image-wrapper" data-align="center">
  <div class="resizable-image-container">
    <div class="image-toolbar">
      <!-- 4 个按钮 -->
    </div>
    <img src="..." />
    <div class="resize-handle"></div>
  </div>
</div>
```

#### 2. 检查 CSS 是否生效
在开发者工具中检查 `.resize-handle` 的样式：
- `position: absolute` ✅
- `right: -8px` ✅
- `bottom: -8px` ✅
- `width: 24px` ✅
- `height: 24px` ✅
- `z-index: 100` ✅
- `pointer-events: auto` ✅
- `cursor: nwse-resize` ✅

#### 3. 检查事件监听
在控制台执行：
```javascript
document.querySelectorAll('.resize-handle').forEach(handle => {
  console.log('Handle found:', handle);
  console.log('Has mousedown listener:', !!handle.onmousedown);
});
```

应该显示找到手柄，并且有事件监听器。

## 📸 预期效果

### 默认状态
- 图片正常显示
- 无任何额外元素可见

### 悬停状态
- 右下角出现**蓝色圆点**（24x24px）
- 上方出现**半透明工具栏**（4 个按钮）
- 光标移到圆点上变成**斜向箭头** ↘️

### 拖动中
- 图片周围有**蓝色虚线边框**
- 图片大小实时变化
- 蓝色圆点始终可见

### 拖动后
- 图片固定为新大小
- 虚线边框消失
- 圆点恢复悬停状态

## 💡 提示

1. **最小宽度**: 图片最小 100px，不能再小
2. **保持比例**: 拖动时自动保持宽高比
3. **主题适配**: 深色模式下手柄边框自动变暗
4. **快捷操作**: 可以通过工具栏快速对齐

