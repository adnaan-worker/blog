# 🤖 智能陪伴系统使用指南

## 📖 概述

小幽灵现在拥有了智能大脑！它可以：

- 🕐 感知时间（早晨、中午、深夜...）
- ☀️ 感知天气（晴天、雨天、温度...）
- 💻 检测系统（电量、网络、浏览器...）
- 👤 追踪用户行为（阅读时间、滚动、输入...）
- 🎉 识别节日和周末
- 🌍 获取地理位置

## ✨ 功能特性

### 1. **时间智能**

小幽灵会根据不同时段给出不同的关怀：

- **凌晨 4-6点（dawn）**：温柔提醒该休息了
- **早晨 6-11点（morning）**：充满活力的问候
- **中午 11-13点（noon）**：午间放松提示
- **下午 13-17点（afternoon）**：陪伴学习工作
- **傍晚 17-19点（evening）**：欣赏夕阳的诗意
- **晚上 19-23点（night）**：温馨的夜晚问候
- **深夜 23-4点（midnight）**：关心你的健康

### 2. **天气关怀**

根据实时天气提供贴心建议：

- ☀️ **晴天**：心情也要明媚起来
- ☁️ **多云**：思绪如云般自由
- 🌧️ **雨天**：欣赏雨声的诗意
- ❄️ **雪天**：温暖如初的祝福
- 🌫️ **雾天**：拨云见日的鼓励
- 🍃 **大风**：清爽的提醒
- ⛈️ **暴雨**：陪伴与安慰

### 3. **系统监测**

智能检测系统状态：

- 🔋 **电量低于20%**：提醒充电
- ⚡ **正在充电**：鼓励你继续工作
- 📶 **网络慢**：给予理解和安慰
- 📴 **离线**：静下来思考也很美好

### 4. **用户行为关怀**

追踪你的行为并给出建议：

- 👀 **阅读超过30分钟**：提醒休息眼睛
- 🤸 **久坐超过45分钟**：建议站起来走走
- ✨ **频繁滚动**：询问是否在寻找灵感
- ⌨️ **检测到输入**：赞美代码如诗
- 📚 **不同页面**：给出针对性的鼓励

### 5. **节日祝福**

自动识别节日：

- 元旦、春节、情人节、妇女节
- 劳动节、儿童节、教师节、国庆节
- 圣诞节、周末等

### 6. **健康提醒**

定时关心你的健康：

- 💧 每30分钟提醒喝水
- 👓 长时间阅读提醒远眺
- 🧘 焦虑时建议深呼吸

## 🎨 文案风格

所有文案都经过精心设计，力求：

- **诗意优美**：像诗一样动人
- **温暖贴心**：真诚关怀
- **简洁精炼**：言简意赅
- **富有共鸣**：触动人心

## 🔧 配置说明

### 🎉 完全免费方案（推荐，无需配置）

**好消息！** 系统默认使用完全免费的API，无需任何配置即可工作：

#### 📍 地理位置（自动启用）

- 使用 **ip-api.com**（完全免费，每分钟45次）
- 自动通过IP定位，无需用户授权
- 精确到城市级别
- **无需任何配置，开箱即用！**

#### ☁️ 天气信息（自动启用）

- 使用 **wttr.in**（完全免费，无需Key）
- 自动获取当前城市天气
- 包含温度、湿度、天气状况
- **无需任何配置，开箱即用！**

### 🚀 进阶配置（可选，更精准）

如果你想要更精准的天气数据，可以使用 OpenWeatherMap：

#### OpenWeatherMap（免费版）

**免费额度**：每分钟60次调用，足够个人使用

**配置步骤**：

1. 访问 [OpenWeatherMap](https://openweathermap.org/api)
2. 注册免费账号
3. 获取API Key（在 API keys 页面）
4. 在 `smart-companion.ts` 中找到这行代码：
   ```typescript
   const apiKey = 'YOUR_OPENWEATHER_KEY';
   ```
5. 替换为你的实际Key：
   ```typescript
   const apiKey = '你的实际API_Key';
   ```

**优点**：

- 更精准的天气数据
- 全球覆盖
- 数据更新频率高
- 支持多语言

### 📊 API对比

| API                | 类型     | 免费额度  | 是否需要Key | 推荐度     |
| ------------------ | -------- | --------- | ----------- | ---------- |
| **ip-api.com**     | 地理位置 | 45次/分钟 | ❌ 不需要   | ⭐⭐⭐⭐⭐ |
| **wttr.in**        | 天气     | 无限制    | ❌ 不需要   | ⭐⭐⭐⭐⭐ |
| **OpenWeatherMap** | 天气     | 60次/分钟 | ✅ 需要     | ⭐⭐⭐⭐   |

### 🎯 推荐配置

**个人博客/小型网站**：

- 使用默认配置即可，完全免费且稳定

**中大型网站**：

- 配置 OpenWeatherMap 获得更好的体验
- 免费额度足够日常使用

**注意**：即使所有API都失败，小幽灵依然可以正常工作，只是缺少天气和地理位置相关的文案。

## 📊 智能匹配算法

小幽灵使用多维度智能匹配：

1. **条件筛选**：根据当前上下文筛选符合条件的文案
2. **优先级排序**：按优先级（1-10）排序
3. **智能选择**：从高优先级文案中随机选择
4. **个性化**：确保每次看到的都不一样

## 🎯 使用效果

小幽灵会在以下时机出现气泡：

- 用户空闲10秒后
- 每20-40秒随机检查一次
- 气泡显示6秒后自动消失
- 智能避免重复显示

## 🚀 未来扩展

可以继续添加：

- 🎵 识别播放的音乐
- 📅 记住用户的重要日期
- 🎮 检测游戏状态
- 💬 更多互动对话
- 🤝 学习用户偏好

## 💡 最佳实践

1. **隐私优先**：所有数据仅在本地处理
2. **性能优化**：后台静默更新，不影响性能
3. **优雅降级**：API失败时自动降级
4. **用户友好**：可以随时拖动或点击小幽灵

## 🌟 温馨提示

小幽灵是你的智能陪伴，但请记住：

> "保持热爱，奔赴山海" - 生活的美好需要你去亲身体验 💙
